{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Candidate Review</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% tailwind_css %}
</head>

<body class="h-screen overflow-hidden bg-gradient-to-br from-blue-50 via-white to-blue-100">

<div class="max-w-7xl mx-auto px-6 pt-4 pb-6 h-full flex flex-col">

    <!-- =====================================================
         FIXED HEADER (NON-SCROLLING CONTROL SURFACE)
    ====================================================== -->

    <section class="recruitment-detail-header bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-4 flex-shrink-0">

        <!-- Top Unified Row -->
        <div class="grid grid-cols-3 items-center">

            <!-- Left: Back -->
            <div>
                <a href="/hr/"
                   class="text-sm font-medium text-gray-700 hover:text-red-600 flex items-center gap-1">
                    <i class="ri-arrow-left-line"></i>
                    Back to Recruitment
                </a>
            </div>

            <!-- Center: Name -->
            <div class="text-center">
                <h1 id="applicant-fullname"
                    class="text-xl font-semibold text-gray-900">
                    —
                </h1>
            </div>

            <!-- Right: Stage Badge -->
            <div class="flex justify-end">
                <span id="current-stage-badge"
                      class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold uppercase bg-blue-100 text-blue-700 border border-blue-200">
                    <i class="ri-flag-line mr-1"></i>
                    —
                </span>
            </div>

        </div>

        <!-- Meta Row -->
        <div class="mt-3 text-sm text-gray-600 flex justify-center flex-wrap items-center gap-2">

            <span id="applicant-role" class="inline-flex items-center gap-1">
                <i class="ri-briefcase-line text-gray-500"></i>
                —
            </span>

            <span class="opacity-40">·</span>

            <span id="applicant-email" class="inline-flex items-center gap-1">
                <i class="ri-mail-line text-gray-500"></i>
                —
            </span>

            <span class="opacity-40">·</span>

            <span id="applicant-phone" class="inline-flex items-center gap-1">
                <i class="ri-phone-line text-gray-500"></i>
                +233 00 000 0000
            </span>

        </div>

        <!-- Progress Ribbon — Dynamic -->
        <div class="mt-6">
            <div id="stage-ribbon"
                 class="flex overflow-hidden rounded-full text-xs font-semibold uppercase tracking-wide shadow-sm">
                <!-- Rendered dynamically by recruitment.detail.js -->
            </div>
        </div>

        <!-- Action Panel — Dynamic -->
        <div id="action-panel"
             class="flex gap-3 mt-4 flex-wrap items-center">
            <!-- Rendered dynamically by recruitment.detail.js -->
        </div>

    </section>


    <!-- =====================================================
         CONTENT AREA (SCROLLABLE PANELS)
    ====================================================== -->

    <div class="flex-1 grid grid-cols-12 gap-6 overflow-hidden">

  <!-- LEFT PANEL: CV -->
<div class="col-span-12 lg:col-span-7 flex flex-col overflow-hidden">

    <div class="rounded-xl p-4 bg-blue-50/60 border border-blue-100 flex-1 flex flex-col overflow-hidden">

        <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-5 flex-1 flex flex-col overflow-hidden">

            <div class="flex justify-between items-center mb-4 flex-shrink-0">
                <h2 id="left-panel-title"
                    class="text-sm font-semibold text-gray-800 uppercase tracking-wide">
                    Curriculum Vitae
                </h2>
                <span id="cv-stage-label"
                      class="text-xs text-blue-600 font-semibold uppercase">
                    Screening Stage
                </span>
            </div>

            <!-- Scrollable CV Area -->
            <div id="cv-viewer"
                 class="flex-1 w-full border border-gray-200 rounded-md bg-white overflow-auto">
            </div>

        </div>
    </div>
</div>


        <!-- RIGHT PANEL: Evaluation -->
        <div class="col-span-12 lg:col-span-5 flex flex-col overflow-hidden">

            <div class="flex-1 overflow-auto">
                {% include "hr/screening_scores.html" %}
            </div>

        </div>

    </div>

</div>


<!-- ============================= -->
<!-- INTERVIEW SCHEDULING MODAL  -->
<!-- ============================= -->

<div id="interview-modal"
     class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden items-center justify-center z-50">

    <div class="bg-white w-full max-w-md rounded-xl shadow-xl border border-gray-200 p-6 relative">

        <button id="close-interview-modal"
                class="absolute top-3 right-3 text-gray-400 hover:text-gray-600 text-lg">
            ×
        </button>

        <h2 class="text-lg font-semibold text-gray-800 mb-4">
            Schedule Interview
        </h2>

        <div class="space-y-4">

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">
                    Interview Date & Time
                </label>
                <input type="datetime-local"
                       id="interview-date"
                       class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-300 focus:border-blue-500">
            </div>

           <div>
    <label class="block text-sm font-medium text-gray-700 mb-1">
        Interviewer
    </label>
    <select id="interviewer-select"
            class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-200 focus:border-blue-400">
        <option value="">Loading interviewers...</option>
    </select>
</div>

<div>
    <label class="block text-sm font-medium text-gray-700 mb-1">
        Interview Mode
    </label>
    <div class="flex gap-3">
        <button type="button" id="mode-inperson"
                onclick="setInterviewMode('in_person')"
                class="flex-1 py-2 text-sm font-semibold rounded-lg border-2 border-blue-600 bg-blue-600 text-white">
            In-Person
        </button>
        <button type="button" id="mode-virtual"
                onclick="setInterviewMode('virtual')"
                class="flex-1 py-2 text-sm font-semibold rounded-lg border-2 border-gray-200 text-gray-500">
            Virtual
        </button>
    </div>
</div>
        </div>

        <div class="flex justify-end gap-3 mt-6">

            <button id="cancel-interview"
                    class="px-4 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">
                Cancel
            </button>

            <button id="confirm-interview"
                    class="px-4 py-2 text-sm font-semibold text-white bg-blue-600 rounded-lg hover:bg-blue-700">
                Confirm & Move to Interview
            </button>

        </div>

    </div>
</div>


<script src="{% static 'js/hr/recruitment/recruitment.detail.js' %}"></script>

</body>
</html>